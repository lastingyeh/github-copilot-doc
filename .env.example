# ===========================================
# TinyURL 服務環境變數配置
# ===========================================
# 複製此檔案為 .env 並修改對應的環境變數值

# ===========================================
# 資料庫配置 (PostgreSQL)
# ===========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=tinyurl
DB_USERNAME=tinyurl_user
DB_PASSWORD=tinyurl_password

# 資料庫連線池配置
DB_MIN_POOL_SIZE=5
DB_MAX_POOL_SIZE=20
DB_CONNECTION_TIMEOUT=30000

# ===========================================
# Redis 快取配置
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_TIMEOUT=5000

# Redis 連線池配置
REDIS_MAX_CONNECTIONS=20
REDIS_MAX_IDLE=10
REDIS_MIN_IDLE=2

# ===========================================
# 應用程式配置
# ===========================================
APP_PORT=8080
APP_CONTEXT_PATH=/

# 管理端點配置
MANAGEMENT_PORT=8081
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,prometheus,metrics

# ===========================================
# 短網址服務配置
# ===========================================
# 短網址基礎 URL
SHORT_URL_BASE_URL=https://tiny.url

# 短網址 ID 長度
SHORT_URL_ID_LENGTH=8

# 預設過期時間（秒，0 表示永不過期）
DEFAULT_EXPIRATION_SECONDS=0

# ===========================================
# 快取配置
# ===========================================
CACHE_URL_MAPPING_TTL_SECONDS=3600
CACHE_STATISTICS_TTL_SECONDS=300

# ===========================================
# 日誌配置
# ===========================================
LOG_LEVEL=INFO
LOG_FORMAT=console
LOG_FILE_PATH=./logs/tinyurl.log

# ===========================================
# 安全配置
# ===========================================
# CORS 允許的來源
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*

# Rate Limiting (每分鐘請求數限制)
RATE_LIMIT_PER_MINUTE=100

# ===========================================
# 監控與觀測性
# ===========================================
# Prometheus 指標收集
PROMETHEUS_ENABLED=true

# 健康檢查配置
HEALTH_CHECK_DISK_THRESHOLD=10GB
HEALTH_CHECK_DB_TIMEOUT=5s

# ===========================================
# 開發環境專用配置
# ===========================================
# 開發工具啟用（如 Adminer）
DEV_TOOLS_ENABLED=true

# 是否啟用 SpringDoc Swagger UI
SPRINGDOC_SWAGGER_UI_ENABLED=true

# 是否啟用詳細的 SQL 日誌
JPA_SHOW_SQL=false
JPA_FORMAT_SQL=false

# ===========================================
# 生產環境配置
# ===========================================
# JVM 記憶體配置
JAVA_OPTS=-Xms512m -Xmx1024m

# 應用程式 Profile
SPRING_PROFILES_ACTIVE=dev